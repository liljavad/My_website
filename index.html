<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Nexus Login - Strength Meter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <style>
    :root {
      --transition-speed: 0.4s;
    }
    body.theme-light {
      --background: #F0F2F9; --surface: #FFFFFF; --primary: #7B68EE; --primary-light: #C3B9FF;
      --text-primary: #1F2937; --text-secondary: #6B7280; --shadow-color: rgba(217, 222, 235, 0.7);
      --input-bg: #F9FAFB; --input-border: #F3F4F6; --particle-color: rgba(123, 104, 238, 0.5);
      --strength-weak: #EF4444; --strength-medium: #F97316; --strength-strong: #22C55E;
    }
    body.theme-dark {
      --background: #111827; --surface: #1F2937; --primary: #818CF8; --primary-light: #4F46E5;
      --text-primary: #F9FAFB; --text-secondary: #9CA3AF; --shadow-color: rgba(0,0,0,0.3);
      --input-bg: #374151; --input-border: #4B5563; --particle-color: rgba(129, 140, 248, 0.5);
      --strength-weak: #F87171; --strength-medium: #FB923C; --strength-strong: #4ADE80;
    }
    body {
      font-family: 'Poppins', sans-serif; background-color: var(--background); color: var(--text-primary);
      display: flex; align-items: center; justify-content: center; min-height: 100vh;
      padding: 1rem; transition: background-color var(--transition-speed), color var(--transition-speed); overflow: hidden;
    }
    #particle-canvas {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
    }
    .theme-switcher {
        position: fixed; top: 20px; right: 20px; width: 44px; height: 44px;
        background-color: var(--surface); border-radius: 50%; display: flex; align-items: center;
        justify-content: center; cursor: pointer; box-shadow: 0 4px 15px var(--shadow-color);
        transition: all var(--transition-speed); z-index: 100;
    }
    .theme-switcher:hover { transform: translateY(-2px) scale(1.05); box-shadow: 0 8px 20px var(--shadow-color); }
    .theme-switcher i {
        color: var(--primary); font-size: 1.2rem; position: absolute; transition: opacity 0.2s, transform 0.2s;
    }
    .theme-switcher .fa-sun { opacity: 0; transform: scale(0); }
    body.theme-dark .fa-sun { opacity: 1; transform: scale(1); }
    body.theme-dark .fa-moon { opacity: 0; transform: scale(0); }
    .login-container {
      position: relative; width: 100%; max-width: 350px;
    }
    .login-box {
      background-color: var(--surface); border-radius: 32px; padding: 40px 30px 30px; 
      box-shadow: 0px 20px 40px -10px var(--shadow-color); text-align: center; overflow: hidden;
      animation: form-fade-in 1s ease-out forwards; transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
    }
    @keyframes form-fade-in {
        from { opacity: 0; transform: scale(0.95) translateY(20px); }
        to { opacity: 1; transform: scale(1) translateY(0); }
    }
    h1, .subtitle, .form-input, .input-label, .submit-btn, .social-btn, .form-footer, .social-divider { transition: all var(--transition-speed); }
    h1 { font-size: 1.8rem; font-weight: 700; margin-bottom: 4px; }
    .subtitle { color: var(--text-secondary); margin-bottom: 28px; font-size: 0.9rem; }
    .form-group { position: relative; margin-bottom: 20px; }
    #password-group { margin-bottom: 8px; } /* Less margin for password to accommodate strength meter */
    .form-input {
      width: 100%; background-color: var(--input-bg); border: 2px solid var(--input-border);
      border-radius: 14px; padding: 14px 8px; font-size: 0.95rem; color: var(--text-primary); outline: none;
    }
    .input-label {
        position: absolute; top: 13px; left: 17px; color: var(--text-secondary);
        pointer-events: none; background-color: var(--input-bg); transform-origin: left;
    }
    .form-input:focus { border-color: var(--primary); background-color: var(--surface); }
    .form-input:focus + .input-label { background-color: var(--surface); }
    .form-input:focus + .input-label, .form-input:not(:placeholder-shown) + .input-label {
        transform: translateY(-25px) scale(0.85); color: var(--primary);
        padding: 2px 6px; font-weight: 500; border-radius: 6px;
    }
    .toggle-btn {
      position: absolute; right: 16px; top: 50%; transform: translateY(-50%);
      cursor: pointer; color: var(--text-secondary); z-index: 2;
    }
    
    /* --- NEW: Password Strength Meter Styles --- */
    .strength-meter {
        display: flex; height: 4px; gap: 4px; margin-top: 8px;
        opacity: 0; transition: opacity var(--transition-speed);
    }
    .strength-meter.visible { opacity: 1; }
    .strength-meter .strength-bar {
        flex: 1; height: 100%; border-radius: 2px;
        background-color: var(--input-border);
        transition: background-color var(--transition-speed);
    }
    .strength-meter .strength-bar.weak { background-color: var(--strength-weak); }
    .strength-meter .strength-bar.medium { background-color: var(--strength-medium); }
    .strength-meter .strength-bar.strong { background-color: var(--strength-strong); }

    .strength-text {
        text-align: left; font-size: 0.75rem; margin-top: 4px; height: 16px;
        color: var(--text-secondary); transition: color var(--transition-speed);
    }
    .strength-text.weak { color: var(--strength-weak); }
    .strength-text.medium { color: var(--strength-medium); }
    .strength-text.strong { color: var(--strength-strong); }

    .submit-btn {
      width: 100%; padding: 14px; margin-top: 4px; border-radius: 12px; background-color: var(--primary);
      color: #fff; font-size: 1rem; font-weight: 600; cursor: pointer; border: none;
      box-shadow: 0 4px 15px rgba(123, 104, 238, 0.4);
    }
    .submit-btn:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 7px 20px rgba(123, 104, 238, 0.5); }
    .social-divider { margin: 20px 0; color: var(--text-secondary); font-size: 0.8rem; }
    .social-logins { display: flex; justify-content: center; gap: 16px; }
    .social-btn {
        width: 44px; height: 44px; display: flex; align-items: center; justify-content: center;
        background-color: var(--surface); border: 1px solid var(--input-border); border-radius: 50%;
        color: var(--text-secondary); font-size: 1.1rem; text-decoration: none;
    }
    .social-btn:hover { border-color: var(--primary); color: var(--primary); transform: translateY(-2px); }
    .form-footer { margin-top: 24px; font-size: 0.8rem; color: var(--text-secondary); }
    .form-footer a { color: var(--primary); font-weight: 500; text-decoration: none; }
  </style>
</head>
<body class="theme-light">
  
  <canvas id="particle-canvas"></canvas>
  
  <div class="theme-switcher" id="theme-switcher">
    <i class="fas fa-moon"></i>
    <i class="fas fa-sun"></i>
  </div>
  
  <div class="login-container">
      <div class="login-box" id="login-box">
          <h1>Welcome Back!</h1>
          <p class="subtitle">Enter your credentials to continue</p>
          <form id="login-form" onsubmit="return false;">
              <div class="form-group">
                  <input type="email" id="email" class="form-input" required placeholder=" ">
                  <label for="email" class="input-label">Email</label>
              </div>
              <div class="form-group" id="password-group">
                  <input type="password" id="password" class="form-input" required placeholder=" ">
                  <label for="password" class="input-label">Password</label>
                  <span class="toggle-btn" onclick="togglePassword(event)"><i id="eye-icon" class="fas fa-eye"></i></span>
              </div>
              <div class="strength-meter" id="strength-meter">
                <div class="strength-bar"></div>
                <div class="strength-bar"></div>
                <div class="strength-bar"></div>
                <div class="strength-bar"></div>
              </div>
              <p class="strength-text" id="strength-text"></p>

              <button type="submit" class="submit-btn">Sign In</button>
          </form>
          <div class="social-divider">or</div>
          <div class="social-logins">
              <a href="#" class="social-btn"><i class="fab fa-google"></i></a>
              <a href="#" class="social-btn"><i class="fab fa-github"></i></a>
              <a href="#" class="social-btn"><i class="fab fa-apple"></i></a>
          </div>
          <div class="form-footer"><p>created by <a href="#">Javad Khan</a></p></div>
      </div>
  </div>

  <script defer>
    const themeSwitcher = document.getElementById('theme-switcher');
    const body = document.body;
    const savedTheme = localStorage.getItem('theme') || 'light';
    body.className = `theme-${savedTheme}`;
    themeSwitcher.addEventListener('click', () => {
        const newTheme = body.classList.contains('theme-light') ? 'dark' : 'light';
        body.classList.replace(`theme-${newTheme === 'dark' ? 'light' : 'dark'}`, `theme-${newTheme}`);
        localStorage.setItem('theme', newTheme);
        setTimeout(initParticles, 50);
    });
    
    // --- NEW: Password Strength Logic ---
    const passwordInput = document.getElementById('password');
    const strengthMeter = document.getElementById('strength-meter');
    const strengthBars = strengthMeter.querySelectorAll('.strength-bar');
    const strengthText = document.getElementById('strength-text');

    const strengthLevels = {
        0: { text: "", class: "" },
        1: { text: "Weak", class: "weak" },
        2: { text: "Medium", class: "medium" },
        3: { text: "Strong", class: "strong" }
    };
    
    passwordInput.addEventListener('input', () => {
        const password = passwordInput.value;
        const strength = checkPasswordStrength(password);

        if (password.length === 0) {
            strengthMeter.classList.remove('visible');
            strengthText.textContent = "";
        } else {
            strengthMeter.classList.add('visible');
            strengthText.textContent = strengthLevels[strength].text;
            strengthText.className = `strength-text ${strengthLevels[strength].class}`;
        }
        
        strengthBars.forEach((bar, index) => {
            if (index < strength) {
                bar.className = `strength-bar ${strengthLevels[strength].class}`;
            } else {
                bar.className = 'strength-bar';
            }
        });
    });

    function checkPasswordStrength(password) {
        let score = 0;
        if (password.length > 7) score++;
        if (password.length > 10) score++;
        if (/[A-Z]/.test(password) && /[a-z]/.test(password)) score++;
        if (/\d/.test(password)) score++;
        if (/[^A-Za-z0-9]/.test(password)) score++;

        if(score < 3) return 1; // Weak
        if(score < 5) return 2; // Medium
        return 3; // Strong
    }

    // --- Particle Background Logic (Unchanged) ---
    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');
    let particlesArray;
    function setCanvasSize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    setCanvasSize();
    let mouse = { x: null, y: null, radius: (canvas.height / 120) * (canvas.width / 120) };
    window.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });
    window.addEventListener('mouseout', () => { mouse.x = undefined; mouse.y = undefined; });
    window.addEventListener('resize', () => { setCanvasSize(); mouse.radius = (canvas.height / 120) * (canvas.width / 120); initParticles(); });
    class Particle {
        constructor(x, y, dirX, dirY, size, color) {
            this.x = x; this.y = y; this.dirX = dirX; this.dirY = dirY; this.size = size; this.color = color;
        }
        draw() { ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false); ctx.fillStyle = this.color; ctx.fill(); }
        update() {
            if (this.x > canvas.width + this.size || this.x < 0 - this.size) this.dirX = -this.dirX;
            if (this.y > canvas.height + this.size || this.y < 0 - this.size) this.dirY = -this.dirY;
            let dx = mouse.x - this.x; let dy = mouse.y - this.y;
            let distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < mouse.radius + this.size) {
                if (mouse.x < this.x && this.x < canvas.width - this.size * 10) this.x += 2;
                if (mouse.x > this.x && this.x > this.size * 10) this.x -= 2;
                if (mouse.y < this.y && this.y < canvas.height - this.size * 10) this.y += 2;
                if (mouse.y > this.y && this.y > this.size * 10) this.y -= 2;
            }
            this.x += this.dirX; this.y += this.dirY; this.draw();
        }
    }
    function initParticles() {
        particlesArray = [];
        let numberOfParticles = (canvas.height * canvas.width) / 10000;
        let color = getComputedStyle(document.body).getPropertyValue('--particle-color');
        for (let i = 0; i < numberOfParticles; i++) {
            let size = (Math.random() * 2) + 1;
            let x = (Math.random() * (innerWidth - size * 2) + size);
            let y = (Math.random() * (innerHeight - size * 2) + size);
            let dirX = (Math.random() * .4) - .2; let dirY = (Math.random() * .4) - .2;
            particlesArray.push(new Particle(x, y, dirX, dirY, size, color));
        }
    }
    function animateParticles() { requestAnimationFrame(animateParticles); ctx.clearRect(0, 0, innerWidth, innerHeight); for (let i = 0; i < particlesArray.length; i++) { particlesArray[i].update(); } }
    initParticles(); animateParticles();

    // --- Basic Toggle Password Function ---
    function togglePassword(event) {
        event.stopPropagation();
        const passField = document.getElementById("password");
        const eyeIcon = document.getElementById('eye-icon');
        const isPassword = passField.type === "password";
        passField.type = isPassword ? "text" : "password";
        eyeIcon.classList.toggle("fa-eye-slash", isPassword);
        eyeIcon.classList.toggle("fa-eye", !isPassword);
    }
  </script>
</body>
</html>
